<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:vm="clr-namespace:FlowCommander.ViewModel"
                    xmlns:v="clr-namespace:FlowCommander.Views.Converters">
    <v:FullNameToShortNameConverter x:Key="FullNameToShortNameConverter" />
    <DataTemplate x:Key="DirectoryItemDataTemplate">
        <TextBlock Text="{Binding Converter={StaticResource FullNameToShortNameConverter}}" />
    </DataTemplate>
    <DataTemplate x:Key="UserTypedRootMapItemsVMDataTemplate">
        <DockPanel>
            <TextBox DockPanel.Dock="Top"
                Text="{Binding Root}" />
            <Button DockPanel.Dock="Top" Content="Load" />
            <ListBox ItemsSource="{Binding Items}"
                     ItemTemplate="{StaticResource DirectoryItemDataTemplate}"
                     IsSynchronizedWithCurrentItem="True" />
        </DockPanel>
    </DataTemplate>
    <DataTemplate x:Key="BoundRootMapItemsVMDataTemplate">
        <DockPanel>
            <ListBox ItemsSource="{Binding Items}"
                     ItemTemplate="{StaticResource DirectoryItemDataTemplate}"
                     IsSynchronizedWithCurrentItem="True" />
        </DockPanel>
    </DataTemplate>
    <DataTemplate DataType="{x:Type vm:SelectDirectoryViewModel}">
        <UniformGrid Rows="1">
            <ContentControl Content="{Binding Level1Directory}"
                        ContentTemplate="{StaticResource UserTypedRootMapItemsVMDataTemplate}" />
            <ContentControl Content="{Binding Level2Directory}"
                        ContentTemplate="{StaticResource BoundRootMapItemsVMDataTemplate}" />
        </UniformGrid>
    </DataTemplate>
</ResourceDictionary>